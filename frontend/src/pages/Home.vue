<template>
    <section class="typograph scroll-handler">
        JUNESU
    </section>
    <ui-title class="scroll-handler"></ui-title>
    <section class="horizontal__scroll">
        <div class="horizontal__scroll--pin">
            <div class="horizontal__scroll__items to-right">
                <div class="item">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Necessitatibus, temporibus esse magni illum eos natus ipsum minus? Quis excepturi voluptates atque dolorum minus eligendi! Omnis minima magni recusandae ex dignissimos.</div>
                <div class="item">Eaque ullam illum nobis deleniti mollitia unde, sed, nemo ipsa ratione ex, dicta aliquam voluptates! Odio vitae eum nobis dignissimos sunt ipsum repellendus totam optio distinctio. Laborum suscipit quia aperiam.</div>
                <div class="item">Animi, porro molestias? Reiciendis dolor aspernatur ab quos nulla impedit, dolores ullam hic commodi nobis nam. Dolorem expedita laudantium dignissimos nobis a. Dolorem, unde quidem. Tempora et a quibusdam inventore!</div>
                <div class="item">Labore, unde amet! Alias delectus hic laboriosam et dolorum? Saepe, dicta eaque? Veniam eos blanditiis neque. Officia et nostrum, tempore modi quo praesentium aspernatur vero dolor, ipsa unde perspiciatis minima.</div>
                <div class="item">Quaerat error dolorem aspernatur magni dicta ut consequuntur maxime tempore. Animi odio eos quod culpa nulla consectetur? Aperiam ipsam ducimus delectus reprehenderit unde, non laborum voluptate laboriosam, officiis at ea!</div>
                <div class="item">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Necessitatibus, temporibus esse magni illum eos natus ipsum minus? Quis excepturi voluptates atque dolorum minus eligendi! Omnis minima magni recusandae ex dignissimos.</div>
                <div class="item">Eaque ullam illum nobis deleniti mollitia unde, sed, nemo ipsa ratione ex, dicta aliquam voluptates! Odio vitae eum nobis dignissimos sunt ipsum repellendus totam optio distinctio. Laborum suscipit quia aperiam.</div>
                <div class="item">Animi, porro molestias? Reiciendis dolor aspernatur ab quos nulla impedit, dolores ullam hic commodi nobis nam. Dolorem expedita laudantium dignissimos nobis a. Dolorem, unde quidem. Tempora et a quibusdam inventore!</div>
                <div class="item">Labore, unde amet! Alias delectus hic laboriosam et dolorum? Saepe, dicta eaque? Veniam eos blanditiis neque. Officia et nostrum, tempore modi quo praesentium aspernatur vero dolor, ipsa unde perspiciatis minima.</div>
                <div class="item">Quaerat error dolorem aspernatur magni dicta ut consequuntur maxime tempore. Animi odio eos quod culpa nulla consectetur? Aperiam ipsam ducimus delectus reprehenderit unde, non laborum voluptate laboriosam, officiis at ea!</div>
            </div>
        </div>
    </section>
    <section class="top__banner">
        <div class="top--marquee">
            <div class="text text-stroke">WELCOME TO THIS PLACE</div>
            <div class="text text-stroke">WELCOME TO THIS PLACE</div>
            <div class="text text-stroke">WELCOME TO THIS PLACE</div>
            <div class="text text-stroke">WELCOME TO THIS PLACE</div>
        </div>
    </section>
    <ui-title class="scroll-handler"></ui-title>
    <section class="horizontal__scroll">
        <div class="horizontal__scroll--pin">
            <div class="horizontal__scroll__items to-left">
                <div class="item">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Necessitatibus, temporibus esse magni illum eos natus ipsum minus? Quis excepturi voluptates atque dolorum minus eligendi! Omnis minima magni recusandae ex dignissimos.</div>
                <div class="item">Eaque ullam illum nobis deleniti mollitia unde, sed, nemo ipsa ratione ex, dicta aliquam voluptates! Odio vitae eum nobis dignissimos sunt ipsum repellendus totam optio distinctio. Laborum suscipit quia aperiam.</div>
                <div class="item">Animi, porro molestias? Reiciendis dolor aspernatur ab quos nulla impedit, dolores ullam hic commodi nobis nam. Dolorem expedita laudantium dignissimos nobis a. Dolorem, unde quidem. Tempora et a quibusdam inventore!</div>
                <div class="item">Labore, unde amet! Alias delectus hic laboriosam et dolorum? Saepe, dicta eaque? Veniam eos blanditiis neque. Officia et nostrum, tempore modi quo praesentium aspernatur vero dolor, ipsa unde perspiciatis minima.</div>
                <div class="item">Quaerat error dolorem aspernatur magni dicta ut consequuntur maxime tempore. Animi odio eos quod culpa nulla consectetur? Aperiam ipsam ducimus delectus reprehenderit unde, non laborum voluptate laboriosam, officiis at ea!</div>
                <div class="item">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Necessitatibus, temporibus esse magni illum eos natus ipsum minus? Quis excepturi voluptates atque dolorum minus eligendi! Omnis minima magni recusandae ex dignissimos.</div>
                <div class="item">Eaque ullam illum nobis deleniti mollitia unde, sed, nemo ipsa ratione ex, dicta aliquam voluptates! Odio vitae eum nobis dignissimos sunt ipsum repellendus totam optio distinctio. Laborum suscipit quia aperiam.</div>
                <div class="item">Animi, porro molestias? Reiciendis dolor aspernatur ab quos nulla impedit, dolores ullam hic commodi nobis nam. Dolorem expedita laudantium dignissimos nobis a. Dolorem, unde quidem. Tempora et a quibusdam inventore!</div>
                <div class="item">Labore, unde amet! Alias delectus hic laboriosam et dolorum? Saepe, dicta eaque? Veniam eos blanditiis neque. Officia et nostrum, tempore modi quo praesentium aspernatur vero dolor, ipsa unde perspiciatis minima.</div>
                <div class="item">Quaerat error dolorem aspernatur magni dicta ut consequuntur maxime tempore. Animi odio eos quod culpa nulla consectetur? Aperiam ipsam ducimus delectus reprehenderit unde, non laborum voluptate laboriosam, officiis at ea!</div>
            </div>
        </div>
    </section>
    <section class="scroll-handler prologue">
        <div class="prologue--text text-stroke effect-dot">
            hello
            <span class="inner-dot"></span>
        </div>
        <div class="prologue--text text-stroke effect-line">
            <span>my style</span>
        </div>
        <div class="prologue--text text-stroke effect-blur">
            <span>trust me.</span>
        </div>
    </section>
    <section class="loading">
        <div class="loading--circle"></div>
        <div class="loading--circle"></div>
        <div class="loading--circle"></div>
    </section>
    <section class="card">
        <div class="card__marquee--text marquee--2">
            <div class="text text-stroke">ALWAYS IMPROVE</div>
            <div class="text text-stroke">ALWAYS IMPROVE</div>
            <div class="text text-stroke">ALWAYS IMPROVE</div>
            <div class="text text-stroke">ALWAYS IMPROVE</div>
        </div>
        <div class="card__marquee--text marquee--3">
            <div class="text text-stroke">ALWAYS IMPROVE</div>
            <div class="text text-stroke">ALWAYS IMPROVE</div>
            <div class="text text-stroke">ALWAYS IMPROVE</div>
            <div class="text text-stroke">ALWAYS IMPROVE</div>
        </div>
        <div class="card--image"><img src="@/assets/image/common/card.jpg" alt=""></div>
        <div class="card__info--text">
            <p>ALWAYS IMPROVE,</p>
            <p>NEVER</p>
            <p>CHANGE. LET'S</p>
            <p>NAVIGATE</p>
            <p>IDENTITY, SET</p>
            <p>OUR</p>
            <p>IMAGINATION</p>
            <p>FREE AND</p>
            <p>BECOME US AS</p>
            <p>WE WISH.</p>
            <div class="inner--text">
                <p>As humans, we celebrate beauty as</p>
                <p>something unique. We believe self-</p>
                <p>expression is about embracing who we are,</p>
                <p>letting our imagination run free and our</p>
                <p>true colors shine through.</p>
            </div>
        </div>
    </section>
    <section class="appeal">
        <p class="appeal--text left--direction">
            <span class="text-stroke">WANT TO KNOW</span>
        </p>
        <p class="appeal--text right--direction">
            <span class="text-stroke">WHAT<img class="appeal--image" src="@/assets/image/common/junesu.png" alt="">MAKES</span>
        </p>
        <p class="appeal--text left--direction">
            <span class="text-stroke">LJS SO LJS?</span>
        </p>
    </section>
    <section class="work">
        <div class="work__list">
            <a class="work__list--link link" href=""></a>
            <img class="work__list--img" src="" alt=""/>
            <div class="work__list--marquee">
                <div class="marquee--text">
                    <div class="text">1</div>
                    <div class="text">2</div>
                    <div class="text">3</div>
                    <div class="text">4</div>
                </div>
            </div>
        </div>
    </section>
</template>

<script>
    import Title from '@/components/Title.vue';

    import gsap from 'gsap';
    import ScrollTrigger from "gsap/ScrollTrigger";
    gsap.registerPlugin(ScrollTrigger);

    export default {
        name: 'Home',
        data () {
            return {
                title: '',
                nameTitle: ''
            }
        },
        components: {
            'ui-title': Title
        },
        mounted:function () {
            window.addEventListener("scroll", this.sectionHandle); // scroll addCLass
            this.horizontalScroll(); // 가로 스크롤
            gsap.to(".left--direction", {
                xPercent: 20,
                ease: "none",
                scrollTrigger: {
                    trigger: ".appeal",
                    scrub: 2,
                    start: "top center"
                },
            });

            gsap.to(".right--direction", {
                xPercent: -20,
                ease: "none",
                scrollTrigger: {
                    trigger: ".appeal",
                    scrub: 2,
                    start: "top center"
                },
            });

            gsap.to(".card--image", {
                xPercent: -7,
                ease: "none",
                scrollTrigger: {
                    trigger: ".card",
                    scrub: 1,
                    start: "top center"
                },
                rotation: -2
            });

            gsap.to(".card__info--text", {
                xPercent: 7,
                ease: "none",
                scrollTrigger: {
                    trigger: ".card",
                    scrub: 1,
                    start: "top center"
                },
                rotation: 2
            });

        },
        methods: {
            sectionHandle: function () {
                let target = document.querySelectorAll(".scroll-handler");
                let targetPosition;
                for ( let i = 0; i < target.length; i++ ) {
                    targetPosition = target[i].getBoundingClientRect().top + 300;
                    let screenSize = window.innerHeight;
                    if ( targetPosition < screenSize && !target[i].classList.contains("active") ) {
                        target[i].classList.add("active");
                    }
                }
            },
            horizontalScroll: function () {
                const horizontalSections = gsap.utils.toArray('.horizontal__scroll')
                horizontalSections.forEach(function (sec) {
                    let thisPinWrap = sec.querySelector('.horizontal__scroll--pin');
                    let thisAnimWrap = thisPinWrap.querySelector('.horizontal__scroll__items');
                    let getToValue = () => - (thisAnimWrap.scrollWidth - window.innerWidth);

                    gsap.fromTo(thisAnimWrap, {
                        x: () => thisAnimWrap.classList.contains('to-right') ? 0 : getToValue()
                    }, {
                        x: () => thisAnimWrap.classList.contains('to-right') ? getToValue() : 0,
                        ease: "none",
                        scrollTrigger: {
                            trigger: sec,
                            start: "top top",
                            end: () => "+=" + ( thisAnimWrap.scrollWidth - window.innerWidth ),
                            pin: thisPinWrap,
                            invalidateOnRefresh: true,
                            scrub: true,
                        }
                    });
                });
            }
        }
    }
</script>
